# BS-TAX-FILINGS-UP-TO-DATE â€” Sales tax filings completed through most recent period

## Intent
Confirm tax filings are completed through the most recent required period based on filing cadence.

## Inputs (required)
- `RuleContext.period_end`
- Evidence: `tax_agencies`, `tax_returns`

## Config (knobs)
Config model: `TaxFilingsUpToDateRuleConfig`
- `enabled`
- `tax_agencies_evidence_type`
- `tax_returns_evidence_type`
- `exclude_agency_name_patterns`
- `delinquent_status`
- `missing_data_policy`

## Decision table
- NOT_APPLICABLE:
  - `enabled == false`, or no tracked agencies
- `missing_data_policy`:
  - evidence missing, or cadence cannot be inferred, or no filed returns
- `delinquent_status`:
  - latest filed return end date < expected period end
  - expected period end is the most recent scheduled period end `<= period_end`, generated by
    rolling from the latest covered end using the cadence (not calendar quarters)
- PASS:
  - latest filed return end date >= expected period end

## Output expectations
- `details[]` includes agency cadence, expected period end, and latest filing period.

## Tests
- `src/backend/tests/rules_engine/test_bs_tax_filings_up_to_date.py`
